# SymbolSignOn 企画書

## 🧭 プロジェクト概要

**SymbolSignOn** は、Symbolブロックチェーンの署名機能を用いたOAuth2互換の認証基盤です。  
ユーザーは秘密鍵による署名を通じて自身を証明し、安全かつ分散的なログインが可能になります。

- プロジェクト名: **SymbolSignOn**
- 使用技術: TypeScript, Node.js, MongoDB, Redis
- 目的: Symbolアカウントによる分散ログインサービスの提供

---

## 🎯 目的と背景

- パスワードレス、メールレスなログインをSymbolユーザーへ提供
- OAuth2に準拠した認証フローによってWeb2/Web3アプリの両方に対応
- 個人開発・OSS利用も考慮し、将来的なSaaS展開も視野に

---

## 🛠️ 技術構成

| 要素             | 技術                 | 説明                                 |
|------------------|----------------------|--------------------------------------|
| バックエンド      | Node.js + TypeScript | Expressベース                         |
| DB               | MongoDB              | クライアント・セッション・署名ログ管理 |
| キャッシュ        | Redis                | セッション保持、レート制限、Origin検証 |
| 認証              | OAuth2 (PKCE対応)    | state/nonce 対応、CORS制御付き         |
| ブロックチェーン | Symbol SDK           | トランザクション署名と検証に使用       |

---

## 🔒 セキュリティと仕様

- PKCE（Proof Key for Code Exchange）に対応
- クライアントIDごとのリダイレクト先Originの事前登録（Pathは不問）
- stateおよびnonceによるCSRFとリプレイ攻撃対策
- Redisによりセッションやレートリミットを強化

---

## 📦 API仕様（概要）

| メソッド | パス              | 内容                     |
|----------|-------------------|--------------------------|
| GET      | `/authorize`      | 認証画面の表示            |
| POST     | `/callback`       | ユーザー署名受領＆検証処理 |
| POST     | `/token`          | アクセストークンの発行     |
| GET      | `/userinfo`       | ユーザー情報の取得         |

---

## 💰 料金体系（将来的な事業化案）

### 基本無料＋段階的有料化の構想：

- 認証回数制限：30件/月まで無料
- クライアント登録数：1件まで無料、以降は有料
- 有料プラン（年契約）にて無制限 or 拡張機能提供

### 有料オプション案：

1. アカウント数の追加
2. 高速キャッシュ認証（Redis強化）
3. チーム共有／開発支援

---

## 🔄 冗長化構成（初期想定）

- 最小構成：1台（開発・個人利用向け）
- 推奨構成：3台（API + DB + Redis分離）
- 将来的にスケーラブルな構成へ拡張可能
  - MongoDB Replica Set
  - Redis Sentinel
  - APIサーバのロードバランス

---

## 🔗 拡張機能（将来計画）

- クライアント登録フォームの自動審査機能
- DApp向けSymbolウォレット連携
- モバイルアプリ・拡張機能との統合
- 「署名付きリンク」モジュールとの連携（別チャットにて設計）

---

## 🪪 ブランドとUI

- ロゴコンセプト：堅牢性＋近未来感
  - ロゴ案A：シールド系  
  - ロゴ案B：グリッド風  
  - ロゴ案C：サイバー系

- UIイメージ：
  - シンプルな承認画面（ウォレット署名）
  - 管理画面からクライアント登録・編集・統計表示

---

## 🚀 開発ロードマップ（2025下半期）

| フェーズ | 内容                                 | 目標時期 |
|----------|--------------------------------------|----------|
| Phase 1  | 認証・署名検証の最小構成完成         | 8月中    |
| Phase 2  | クライアント登録画面、自動審査導入   | 9月      |
| Phase 3  | SaaS化（料金プラン・UI整備）         | 秋以降   |

---

## 📝 備考

- ログインはSymbolアカウントで完結（メール等不要）
- 秘密鍵をサーバに渡さず、署名のみを使って認証
- 個人利用から始めて、必要に応じて商用化・法人化も検討
